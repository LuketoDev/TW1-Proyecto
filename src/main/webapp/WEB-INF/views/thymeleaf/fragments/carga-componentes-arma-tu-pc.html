
<div th:fragment="cargarPaso (armado, componentes, producto, carpetaComponenteFoto, pasoAnterior, pasoSiguiente)">
    <div class="container-xxl py-4">
        <p th:if="${param.errorLimite!=null}" th:text="${param.errorLimite}" class="alert alert-danger banners-info"></p>
        <p th:if="${param.agregado!=null}" th:text="${param.agregado}" class="alert alert-success banners-info"></p>
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-4 mb-3">
                <div class="border rounded p-2 bg-white mb-3">
                    <div class="row g-2 text-center">
                        <!-- Placeholder icons -->
                        <div class="col-6">
                            <div th:if="${armado.procesador != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/{imagen}(imagen=${armado.procesador.imagen})}" th:alt="${armado.procesador.modelo}" class="img-fluid w-50 m-auto my-3">
                                    <p th:text="'x1 '+ ${armado.procesador.modelo}"></p>
                                </div>
                            </div>
                            <div th:unless="${armado.procesador != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/procesadorVacio.png}" alt="procesadorVacio" class="w-25 m-auto my-3">
                                    <p>Procesador</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div th:if="${armado.motherboard != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/{imagen}(imagen=${armado.motherboard.imagen})}" th:alt="${armado.motherboard.modelo}" class="img-fluid w-50 m-auto my-3">
                                    <p th:text="'x1 '+ ${armado.motherboard.modelo}"></p>
                                </div>
                            </div>
                            <div th:unless="${armado.motherboard != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/motherboardVacia.png}" alt="motherboardVacia" class="w-25 m-auto my-3">
                                    <p>Motherboard</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div th:if="${armado.cooler != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/{imagen}(imagen=${armado.cooler.imagen})}" th:alt="${armado.cooler.modelo}" class="img-fluid w-50 m-auto my-3">
                                    <p th:text="'x1 '+ ${armado.cooler.modelo}"></p>
                                </div>
                            </div>
                            <div th:unless="${armado.cooler != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/coolerVacio.png}" alt="coolerVacia" class="w-25 m-auto my-3">
                                    <p>Cooler</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div th:if="${armado.rams.size() > 0}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100 d-flex flex-column justify-content-between">
                                    <div th:each="entry: ${armado.ramsDetalladas}" class="w-100 m-0">
                                        <p th:text="'x'+ ${entry.value} +' '+ ${entry.key} " class="m-0"></p>
                                    </div>
                                    <p>Memoria</p>
                                </div>

                            </div>
                            <div th:unless="${armado.rams.size() > 0}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/memoriaVacia.png}" alt="memoriaVacia" class="w-25 m-auto my-3">
                                    <p>Memoria</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div th:if="${armado.gpu != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/{imagen}(imagen=${armado.gpu.imagen})}" th:alt="${armado.gpu.modelo}" class="img-fluid w-50 m-auto my-3">
                                    <p th:text="'x1 '+ ${armado.gpu.modelo}"></p>
                                </div>
                            </div>
                            <div th:unless="${armado.gpu != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/gpuVacio.png}" alt="gpuVacio" class="w-25 m-auto my-3">
                                    <p>Placa de Video</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div th:if="${armado.almacenamiento.size() > 0}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100 d-flex flex-column justify-content-between">
                                    <div th:each="entry: ${armado.almacenamientoDetallado}" class="w-100 m-0">
                                        <p th:text="'x'+ ${entry.value} +' '+ ${entry.key} " class="m-0"></p>
                                    </div>
                                    <p>Almacenamiento</p>
                                </div>
                            </div>
                            <div th:unless="${armado.almacenamiento.size() > 0}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/almacenamientoVacio.png}" alt="almacenamientoVacio" class="w-25 m-auto my-3">
                                    <p>Almacenamiento</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div th:if="${armado.fuente != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/{imagen}(imagen=${armado.fuente.imagen})}" th:alt="${armado.fuente.modelo}" class="img-fluid w-50 m-auto my-3">
                                    <p th:text="'x1 '+ ${armado.fuente.modelo}"></p>
                                </div>
                            </div>
                            <div th:unless="${armado.fuente != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/fuenteVacia.png}" alt="fuenteVacia" class="w-25 m-auto my-3">
                                    <p>Fuente</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div th:if="${armado.gabinete != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/{imagen}(imagen=${armado.gabinete.imagen})}" th:alt="${armado.gabinete.modelo}" class="img-fluid w-50 m-auto my-3">
                                    <p th:text="'x1 '+ ${armado.gabinete.modelo}"></p>
                                </div>
                            </div>
                            <div th:unless="${armado.gabinete != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/gabineteVacio.png}" alt="gabineteVacio" class="w-25 m-auto my-3">
                                    <p>Gabinete</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div th:if="${armado.monitor != null}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/{imagen}(imagen=${armado.monitor.imagen})}" th:alt="${armado.monitor.modelo}" class="img-fluid w-50 m-auto my-3">
                                    <p th:text="'x1 '+ ${armado.monitor.modelo}"></p>
                                </div>
                            </div>
                                <div th:unless="${armado.monitor != null}" class="h-100">
                                    <div class="border rounded bg-light py-3 h-100">
                                        <img th:src="@{/imagenes/monitorVacio.png}" alt="monitorVacio" class="w-25 m-auto my-3">
                                        <p>Monitor</p>
                                    </div>
                                </div>
                        </div>
                        <div class="col-6">
                            <div th:if="${armado.perifericos.size() > 0}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100 d-flex flex-column justify-content-between">
                                    <div th:each="entry: ${armado.perifericosDetallados}" class="w-100 m-0">
                                        <p th:text="'x'+ ${entry.value} +' '+ ${entry.key} " class="m-0"></p>
                                    </div>
                                    <p>Perifericos</p>
                                </div>
                            </div>
                            <div th:unless="${armado.perifericos.size() > 0}" class="h-100">
                                <div class="border rounded bg-light py-3 h-100">
                                    <img th:src="@{/imagenes/perifericoVacio.png}" alt="perifericoVacio" class="w-25 m-auto my-3">
                                    <p>Perifericos</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="border rounded p-3 bg-white text-center">
                    <p class="fw-bold" th:text="${'$ ' + armado.precioTotal}"></p> <!-- aca deberia entrar la sumatoria del armadoPcDto-->
                    <div class="d-flex justify-content-between">
                        <a th:if="${producto != 'procesador'}" th:href="${pasoAnterior}" class="btn btn-outline-secondary btn-sm">Anterior paso</a>
                        <form th:action="@{/arma-tu-pc/tradicional/reiniciar-armado}" method="POST">
                            <input type="submit" class="btn btn-outline-dark btn-sm" value="Reiniciar Armado">
                        </form>
                        <a th:if="${producto != 'periferico'}" th:href="${pasoSiguiente}" class="btn btn-outline-danger btn-sm">Siguiente paso</a>
                        <a th:if="${producto == 'periferico'}" th:href="@{/arma-tu-pc/tradicional/resumen}" class="btn btn-outline-danger btn-sm">Finalizar Armado</a>
                    </div>
                </div>
            </div>

            <!-- Main content -->
            <div class="col-lg-8">
                <!-- Filtros -->
                <div th:if="${producto == 'procesador'}" class="mb-4"> <!--Si no es un procesador no mostramos AMD y INTEL-->
                    <button class="btn btn-outline-dark me-2">AMD</button>
                    <button class="btn btn-outline-primary">Intel</button>
                </div>

                <!-- Cards -->
                <div class="row g-3">
                    <!-- Card ejemplo -->
                    <div class="col-md-6 col-lg-4 mt-2 h-100" th:each ="componente : ${componentes}">
                        <form method="POST" th:action="@{'/arma-tu-pc/tradicional/' + ${producto}}" class="h-100">
                            <div class="card h-75">
                                <div>
                                    <img th:src="@{'/imagenes/'+ ${componente.imagen}}" class="card-img-top img-fluid" th:alt="${componente.modelo}">
                                </div>
                                <div class="card-body">
                                    <h6 class="card-title" th:text="${componente.modelo}"></h6>
                                    <p class="card-text text-muted" th:text="'$'+${componente.precio}"></p>
                                    <span class="badge bg-success">Compatible</span>
                                    <input type="hidden" name="id" th:value="${componente.id}">
                                    <input  th:if="${producto != 'memoria' && producto != 'almacenamiento'}" type="hidden" name="cantidad" value="1">
                                    <select th:if="${producto == 'memoria'}" name="cantidad">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                    <select th:if="${producto == 'almacenamiento'}" name="cantidad">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                    </select>
                                    <input type="submit" class="btn btn-outline-primary" value="Seleccionar">
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <script th:src="@{/js/armaTuPc.js}"></script>
</div>

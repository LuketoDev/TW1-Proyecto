<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>Carrito de compras</title>
</head>
<body>
<main>

    <form th:action="@{/home.html}" th:object="${FormularioDePagoDTO}" id="formulario" method="post" accept-charset="UTF-8">

        <section class="contenedor">
            <article class="datos">
                <h2>Complete con sus datos</h2>

                <label for="nombre">Nombre</label>
                <input class="data" type="text" id="nombre" name="nombre" th:field="*{nombre}" placeholder="Ingresar nombre">
                <div th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}" class="error"></div>
                <label for="apellido">Apellido</label>
                <input class="data" type="text" id="apellido" name="apellido" th:field="*{apellido}" placeholder="Ingresar apellido">
                <div th:if="${#fields.hasErrors('apellido')}" th:errors="*{apellido}" class="error"></div>
                <label for="correo">Correo electrónico</label>
                <input class="data" type="email" id="correo" name="correo"  placeholder="Ingresar correo electrónico" th:field="*{email}" required>
                <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="error"></div>
                <label for="emailRepetido">Repetir correo electrónico</label>
                <input class="data" type="email" id="emailRepetido" name="emailRepetido"  placeholder="Repetir correo electrónico" th:field="*{emailRepetido}" required>
                <div th:if="${#fields.hasErrors('emailRepetido')}" th:errors="*{emailRepetido}" class="error"></div>
                <label for="telefono">Número telefónico</label>
                <input class="data" type="text" id="telefono" name="telefono" th:field="*{telefono}" placeholder="Ingresar número">
                <div th:if="${#fields.hasErrors('telefono')}" th:errors="*{telefono}" class="error"></div>
            </article>

            <fieldset class="mensajeAdv">
                <p>ATENCIÓN: ¡Verifique que su correo electrónico sea el correcto ya que será utilizado para enviar el comprobante de su compra!</p>
            </fieldset>

            <article class="contenedorUno">
                    <h2>Resumen de su compra</h2>
                    <div class="container">
                        <!-- TABLA DE PRODUCTOS AGREGADOS AL CARRITO  -->
                        <div class="card d-flex align-content-center m-2" style="width: 800px;">
                            <h3 class="card-title m-2">Productos</h3>
                            <div class="card-body">
                                <table class="table">
                                    <thead>
                                    <tr class="text-center">
                                        <th scope="col">Nombre</th>
                                        <th scope="col">Precio</th>
                                        <th scope="col">Cantidad</th>
                                    </tr>
                                    </thead>
                                    <tbody th:if="${productos != null and !productos.isEmpty()}">
                                    <tr class="text-center" th:each="producto : ${productos}">
                                        <td th:text="${producto.nombre}"></td>
                                        <td class="precioTotalDelProducto" th:text="${producto.precio * producto.getCantidad()} "></td>
                                        <td class="text-center" th:data-id="${producto.id}">
                                            <span th:text="${producto.cantidad}" class="mx-2 productoCantidad">1</span>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="card-footer">
                                <h3 class="card-title m-2 text-end ">
                                    Total: <span class="valorTotalDelCarrito" th:text="${valorTotal}"></span>
                                </h3>
                            </div>
                        </div>
                    </div>
                <a class="btn btn-secondary botones" id="boton-volver" th:href="@{/carritoDeCompras.html}">Volver</a>
            </article>

        </section>
    </form>
</main>
<script th:src="@{/js/carritoDeCompras.js}"></script>
<script type="text/javascript" th:src="@{/webjars/bootstrap/5.2.0/js/bootstrap.min.js}"></script>
<script src="https://kit.fontawesome.com/36c2602d92.js" crossorigin="anonymous"></script>
</body>
</html>